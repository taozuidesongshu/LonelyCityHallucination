<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.38">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.png"><meta name="msapplication-TileColor" content="#3eaf7c"><meta name="theme-color" content="#3eaf7c"><title>docker 容器常用操作详解 | 陶醉的松鼠</title><meta name="description" content="一个实用笔记">
    <link rel="modulepreload" href="/LonelyCityHallucination/assets/app.2c8e1465.js"><link rel="modulepreload" href="/LonelyCityHallucination/assets/index.html.0dd62d8d.js"><link rel="modulepreload" href="/LonelyCityHallucination/assets/index.html.ef423414.js">
    <link rel="stylesheet" href="/LonelyCityHallucination/assets/style.fa4a577f.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header ref_key="navbar" class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/LonelyCityHallucination/" class=""><img class="logo" src="/LonelyCityHallucination/images/favicon.png" alt="陶醉的松鼠"><span class="site-name can-hide">陶醉的松鼠</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/LonelyCityHallucination/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/guide/" class="" aria-label="文档"><!--[--><!--]--> 文档 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/module/" class="" aria-label="模块"><!--[--><!--]--> 模块 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/knowledge/" class="router-link-active" aria-label="知识点"><!--[--><!--]--> 知识点 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/version/" class="" aria-label="关于作者"><!--[--><!--]--> 关于作者 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/LonelyCityHallucination/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/guide/" class="" aria-label="文档"><!--[--><!--]--> 文档 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/module/" class="" aria-label="模块"><!--[--><!--]--> 模块 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/knowledge/" class="router-link-active" aria-label="知识点"><!--[--><!--]--> 知识点 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/LonelyCityHallucination/version/" class="" aria-label="关于作者"><!--[--><!--]--> 关于作者 <!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading"> <!----></p><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading active"> <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/LonelyCityHallucination/knowledge/git/" class="sidebar-item" aria-label="git命令"><!--[--><!--]--> git命令 <!--[--><!--]--></a><!----></li><li><a href="/LonelyCityHallucination/knowledge/webstrom/" class="sidebar-item" aria-label="webstrom"><!--[--><!--]--> webstrom <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="docker"><!--[--><!--]--> docker <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_1-创建容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="1.创建容器"><!--[--><!--]--> 1.创建容器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_2-启动-停止容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="2.启动/停止容器"><!--[--><!--]--> 2.启动/停止容器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_3-进入容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="3.进入容器"><!--[--><!--]--> 3.进入容器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_4-导出和导入容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="4.导出和导入容器"><!--[--><!--]--> 4.导出和导入容器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_5-删除容器" class="router-link-active router-link-exact-active sidebar-item" aria-label="5. 删除容器"><!--[--><!--]--> 5. 删除容器 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_6-容器的信息" class="router-link-active router-link-exact-active sidebar-item" aria-label="6. 容器的信息"><!--[--><!--]--> 6. 容器的信息 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_7-控制容器系统资源占用" class="router-link-active router-link-exact-active sidebar-item" aria-label="7. 控制容器系统资源占用"><!--[--><!--]--> 7. 控制容器系统资源占用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#_8-docker-源" class="router-link-active router-link-exact-active sidebar-item" aria-label="8. docker 源"><!--[--><!--]--> 8. docker 源 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#docker仓库" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker仓库"><!--[--><!--]--> Docker仓库 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#dockerfile常用命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="Dockerfile常用命令"><!--[--><!--]--> Dockerfile常用命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#workdir" class="router-link-active router-link-exact-active sidebar-item" aria-label="WORKDIR"><!--[--><!--]--> WORKDIR <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#volumn" class="router-link-active router-link-exact-active sidebar-item" aria-label="Volumn"><!--[--><!--]--> Volumn <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#expose" class="router-link-active router-link-exact-active sidebar-item" aria-label="Expose"><!--[--><!--]--> Expose <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#cmd" class="router-link-active router-link-exact-active sidebar-item" aria-label="CMD"><!--[--><!--]--> CMD <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#env" class="router-link-active router-link-exact-active sidebar-item" aria-label="ENV"><!--[--><!--]--> ENV <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#docker-image常用命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker image常用命令"><!--[--><!--]--> Docker image常用命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#docker-container常用命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="Docker container常用命令"><!--[--><!--]--> Docker container常用命令 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/LonelyCityHallucination/knowledge/docker/#命令" class="router-link-active router-link-exact-active sidebar-item" aria-label="命令"><!--[--><!--]--> 命令 <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/LonelyCityHallucination/knowledge/Deepin/" class="sidebar-item" aria-label="Deepin"><!--[--><!--]--> Deepin <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="docker-容器常用操作详解" tabindex="-1"><a class="header-anchor" href="#docker-容器常用操作详解" aria-hidden="true">#</a> docker 容器常用操作详解</h1><h2 id="_1-创建容器" tabindex="-1"><a class="header-anchor" href="#_1-创建容器" aria-hidden="true">#</a> 1.创建容器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 新建并启动一个srs镜像的容器</span>
$ <span class="token function">docker</span> run -it --restart<span class="token operator">=</span>always -p <span class="token number">1985</span>:1985 -v /dev:/dev2 -v /mnt/nfs:/mnt/volume1 --name srs-service srs
--restart<span class="token operator">=</span>always <span class="token comment"># 表示开机启用</span>
-p <span class="token number">1985</span>:1985 <span class="token comment"># 表示主机端口与docker端口的映射</span>
-v /mnt/nfs:/mnt/volume1  <span class="token comment"># 表示本机/mnt/nfs目录挂载到容器/mnt/volume1目录</span>
srs <span class="token comment"># 表示镜像标识符</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_2-启动-停止容器" tabindex="-1"><a class="header-anchor" href="#_2-启动-停止容器" aria-hidden="true">#</a> 2.启动/停止容器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 启动</span>
$ <span class="token function">docker</span> container start xxx
<span class="token comment"># 终止</span>
$ <span class="token function">docker</span> container stop xxx
<span class="token comment"># 查询修改</span>
$ <span class="token function">docker</span> container <span class="token function">diff</span> xxx
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_3-进入容器" tabindex="-1"><a class="header-anchor" href="#_3-进入容器" aria-hidden="true">#</a> 3.进入容器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 容器列表（-a 命令可以查看所有已经创建的包括终止状态的容器）</span>
$ <span class="token function">docker</span> container <span class="token function">ls</span> -a
<span class="token comment"># 进入容器</span>
$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> -it xxx /bin/bash <span class="token comment">#xxx 为容器标识符</span>
<span class="token comment"># 可以通过 docker container update 更新容器，例如 </span>
<span class="token function">docker</span> container update --restart<span class="token operator">=</span><span class="token string">&quot;no&quot;</span> <span class="token operator">&lt;</span> container id<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_4-导出和导入容器" tabindex="-1"><a class="header-anchor" href="#_4-导出和导入容器" aria-hidden="true">#</a> 4.导出和导入容器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 导出容器 本地某个容器快照 使用命令 docker export </span>
$ <span class="token function">docker</span> <span class="token builtin class-name">export</span> xxx <span class="token operator">&gt;</span> container20201216.tar
<span class="token comment"># 导出容器 使用 docker import</span>
$ <span class="token function">cat</span> container20201216.tar <span class="token operator">|</span> <span class="token function">docker</span> <span class="token function">import</span> - srs/srs:v1.0
<span class="token comment"># 通过指定 URL 或者某个目录来导入，例如</span>
$ <span class="token function">docker</span> <span class="token function">import</span> http://example.com/exampleimage.tgz example/imagerepo
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_5-删除容器" tabindex="-1"><a class="header-anchor" href="#_5-删除容器" aria-hidden="true">#</a> 5. 删除容器</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 可以使用 docker container rm 来删除一个处于终止状态的容器, 如</span>
$ <span class="token function">docker</span> container <span class="token function">rm</span>  trusting_newton
<span class="token comment"># 如果数量太多要一个个删除可能会很麻烦，用下面的命令可以清理掉所有处于终止状态的容器。</span>
$ <span class="token function">docker</span> container prune
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_6-容器的信息" tabindex="-1"><a class="header-anchor" href="#_6-容器的信息" aria-hidden="true">#</a> 6. 容器的信息</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># PID 信息</span>
$ <span class="token function">docker</span> inspect --format <span class="token string">&#39;{{ .State.Pid }}&#39;</span> <span class="token operator">&lt;</span>CONTAINER ID or NAME<span class="token operator">&gt;</span>
<span class="token comment"># IP 地址</span>
$ <span class="token function">docker</span> inspect --format <span class="token string">&#39;{{ .NetworkSettings.IPAddress }}&#39;</span> <span class="token operator">&lt;</span>CONTAINER ID or NAME<span class="token operator">&gt;</span>
<span class="token comment"># 容器配置</span>
$ <span class="token function">docker</span> inspect <span class="token operator">&lt;</span>CONTAINER ID or NAME<span class="token operator">&gt;</span>
<span class="token comment"># 容器监控</span>
$ <span class="token function">docker</span> stats
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><blockquote><p>已经运行的容器，可以通过 <code>docker update</code> 更新配置参数 <code>&lt;CONTAINER ID or NAME&gt;</code>（需要先停止容器的运行） 或者通过 <code>/var/lib/docker/containers/容器ID</code> 下的 <code>hostconfig.json</code> 等文件，修改启动配置参数</p></blockquote><h2 id="_7-控制容器系统资源占用" tabindex="-1"><a class="header-anchor" href="#_7-控制容器系统资源占用" aria-hidden="true">#</a> 7. 控制容器系统资源占用</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">docker</span> create <span class="token comment">#命令创建容器</span>
<span class="token function">docker</span> run <span class="token comment">#创建并启动容器的时候</span>
<span class="token comment"># 可以使用:</span>
 -c<span class="token operator">|</span>--cpu-shares<span class="token punctuation">[</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment"># 参数来调整容器使用 CPU 的权重</span>
-m<span class="token operator">|</span>--memory<span class="token punctuation">[</span><span class="token operator">=</span>MEMORY<span class="token punctuation">]</span> <span class="token comment"># 参数来调整容器使用内存的大小。</span>

</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h2 id="_8-docker-源" tabindex="-1"><a class="header-anchor" href="#_8-docker-源" aria-hidden="true">#</a> 8. docker 源</h2><ul><li>Docker 官方中国区：https://registry.docker-cn.com</li><li>网易：http://hub-mirror.c.163.com</li><li>中国科技大学：https://docker.mirrors.ustc.edu.cn</li><li>阿里云：https://y0qd3iq.mirror.aliyuncs.com</li></ul><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token string">&quot;registry-mirrors&quot;</span><span class="token builtin class-name">:</span> <span class="token punctuation">[</span><span class="token string">&quot;https://y0qd3iq.mirror.aliyuncs.com&quot;</span><span class="token punctuation">]</span>&#39;
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="docker仓库" tabindex="-1"><a class="header-anchor" href="#docker仓库" aria-hidden="true">#</a> Docker仓库</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 登陆成功后，可以拉取账号下的全部镜像</span>
<span class="token function">docker</span> login

<span class="token comment"># 退出账号</span>
<span class="token function">docker</span> <span class="token builtin class-name">logout</span>

<span class="token comment"># 搜索镜像</span>
<span class="token function">docker</span> search

<span class="token comment"># 将本地的镜像推到仓库</span>
<span class="token function">docker</span> push
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="dockerfile常用命令" tabindex="-1"><a class="header-anchor" href="#dockerfile常用命令" aria-hidden="true">#</a> Dockerfile常用命令</h2><p><a href="https://www.cnblogs.com/XiaoYang-sir/p/16092169.html?utm_source=gold_browser_extension" target="_blank" rel="noopener noreferrer">传送门<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a><a href="https://www.cnblogs.com/zhangxiaoji/p/16096432.html?utm_source=gold_browser_extension" target="_blank" rel="noopener noreferrer">Docker 核心知识回顾<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p><h3 id="from" tabindex="-1"><a class="header-anchor" href="#from" aria-hidden="true">#</a> FROM</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 语法：FROM &lt;image&gt;:&lt;tag&gt;</span>
<span class="token comment"># `FROM`:指明构建的新镜像是来自于哪个基础镜像 如果没有选择tag，那么默认为 Latest。</span>
<span class="token comment"># 如果不以任何镜像为基础，那么 写法为：FROM scratch。scratch 镜像是一个空镜像，</span>
<span class="token comment"># 可以用于构建 busybox 等超小镜像，可以说是真正的从零开始构建属于自己的镜像。</span>
FROM centos:7
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="maintainer" tabindex="-1"><a class="header-anchor" href="#maintainer" aria-hidden="true">#</a> MAINTAINER</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 指明镜像维护者及其联系方式（一般是邮箱地址）</span>
<span class="token comment"># 语法：LABEL &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; &lt;key&gt;=&lt;value&gt; ...</span>
LABEL <span class="token assign-left variable">maintainer</span><span class="token operator">=</span><span class="token string">&quot;xxx.com&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="run-构建镜像时运行的shell命令" tabindex="-1"><a class="header-anchor" href="#run-构建镜像时运行的shell命令" aria-hidden="true">#</a> RUN 构建镜像时运行的Shell命令</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 构建镜像时运行的 Shell 命令，比如构建的新镜像中想在 /usr/local 目录下创建一个 Java 目录。</span>
RUN <span class="token function">mkdir</span> -p /usr/local/java
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="add-拷贝文件或目录到镜像中-如果是url或压缩包-会自动下载或自动解压。" tabindex="-1"><a class="header-anchor" href="#add-拷贝文件或目录到镜像中-如果是url或压缩包-会自动下载或自动解压。" aria-hidden="true">#</a> ADD:拷贝文件或目录到镜像中, 如果是URL或压缩包，会自动下载或自动解压。</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 语法：ADD &lt;src&gt;... &lt;dest&gt;</span>
ADD jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="copy-拷贝文件或目录到镜像中。用法和-add-一样-只是不支持自动下载和解压。" tabindex="-1"><a class="header-anchor" href="#copy-拷贝文件或目录到镜像中。用法和-add-一样-只是不支持自动下载和解压。" aria-hidden="true">#</a> COPY 拷贝文件或目录到镜像中。用法和 ADD 一样，只是不支持自动下载和解压。</h3><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 语法：COPY &lt;src&gt;... &lt;dest&gt;</span>
COPY jdk-11.0.6_linux-x64_bin.tar.gz /usr/local/java
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="workdir" tabindex="-1"><a class="header-anchor" href="#workdir" aria-hidden="true">#</a> WORKDIR</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 为`RUN、CMD、以及COPY , ADD`等设置默认工作目录,启动容器后会进入这个目录</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="volumn" tabindex="-1"><a class="header-anchor" href="#volumn" aria-hidden="true">#</a> Volumn</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 指定容器挂载点（共享卷）, 用于容器间文件共享，某个容器修改了文件， 其他容器内的相同目录的文件也会同步更改， 要确保不同容器间有相同的目录</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="expose" tabindex="-1"><a class="header-anchor" href="#expose" aria-hidden="true">#</a> Expose</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 暴露容器运行时的监听端口给外部，可以指定端口是监听 TCP 还是 UDP，如果未指定协议，则默认为 TCP。</span>
<span class="token comment"># 语法：EXPOSE &lt;port&gt; [&lt;port&gt;/&lt;protocol&gt;...]</span>
EXPOSE <span class="token number">80</span> <span class="token number">443</span> <span class="token number">8080</span>/tcp
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="cmd" tabindex="-1"><a class="header-anchor" href="#cmd" aria-hidden="true">#</a> CMD</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># :启动容器时执行的`Shell`命令, 会被`docker run` 的参数所覆盖</span>
<span class="token comment"># 启动容器时执行的 Shell 命令，在 Dockerfile 中只能有一条 CMD 命令，如果设置了多条 CMD，只有最后一条 CMD 会生效。</span>
<span class="token comment"># 语法：</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;executable&quot;</span>, <span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># 示例：CMD [&quot;/usr/local/tomcat/bin/catalina.sh&quot;, &quot;run&quot;]</span>
CMD <span class="token punctuation">[</span><span class="token string">&quot;param1&quot;</span>, <span class="token string">&quot;param2&quot;</span><span class="token punctuation">]</span>
<span class="token comment"># 示例：CMD [&quot;echo&quot;, &quot;$JAVA_HOME&quot;]</span>
CMD <span class="token builtin class-name">command</span> param1 param2
<span class="token comment"># 示例：CMD echo $JAVA_HOME</span>
CMD <span class="token builtin class-name">echo</span> <span class="token variable">$JAVA_HOME</span>
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="env" tabindex="-1"><a class="header-anchor" href="#env" aria-hidden="true">#</a> ENV</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 设置容器内环境变量。</span>
<span class="token comment"># 语法：ENV &lt;key&gt; &lt;value&gt;添加单个，ENV &lt;key&gt;=&lt;value&gt; ...添加多个。</span>
ENV JAVA_HOME /usr/local/java/jdk-11.0.6/
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="docker-image常用命令" tabindex="-1"><a class="header-anchor" href="#docker-image常用命令" aria-hidden="true">#</a> Docker image常用命令</h2><p><code>docker build</code>: 根据<code>dockerfile</code>构建一个镜像</p><p><code>docker images</code> : 列出所有的镜像</p><p><code>docker rmi</code> : 删除镜像</p><p><code>docker pull</code>: 在主机上使用一个不存在的镜像时docker会自动下载这个镜像， 想要提前下载就使用这个命令来下载</p><p><code>docker run</code> : 使用镜像生成容器并启动</p><ul><li><code>-- privileged</code> ：使容器中的root拥有真正的root权限，否则root只是外部一个普通用户权限</li><li><code>-t</code>: 在容器内指定一个伪终端或者终端</li><li><code>-i</code>: 允许控制台交互</li><li><code>-d</code>: 让容器在后台运行</li><li><code>-p</code>: 将内部的网络端口随机映射到主机上， 也可以指定端口</li><li><code>- P</code> : 随机端口映射,容器内部端口随机映射到主机的端口</li><li><code>--name</code>: 命名容器， 不指定docker会自动命名</li><li><code>-h/--hostname</code>: 设定容器的主机名， 会被写到容器内的/etc/hostname和/etc/hosts</li><li><code>-v</code>: 挂载宿主机的一个目录 /宿主机目录：/容器目录</li></ul><p><code>docker tag</code>: 给本地镜像打标签 取消标签使用 docker rmi</p><p><code>docker save</code>:将指定镜像保存成 tar 归档文件。 <code>docker save –o export.tar imageId </code></p><p><code>docker load</code> :用来载入镜像包</p><p><code>docker load –i export.tar</code></p><h2 id="docker-container常用命令" tabindex="-1"><a class="header-anchor" href="#docker-container常用命令" aria-hidden="true">#</a> Docker container常用命令</h2><p><code>docker ps</code>: 列出正在运行的容器</p><p><code>docker logs</code>: 查看容器内的标准输出</p><p><code>docker start </code> 容器启动</p><p><code>docker stop</code> 容器停止</p><p><code>docker rm /rm –f</code> : 删除容器</p><p><code>docker port</code> : 显示容器的端口</p><p><code>docker top</code>: 查看容器内运行的进程</p><p><code>docker exec</code> :在运行的容器中执行命令 <code>- i</code> 允许控制台交互 <code>-t</code> 在容器内指定一个伪终端或者终端</p><p><code>docker inspect</code> : 查看容器的底层信息， 返回容器的配置和状态信息</p><p><code>docker cp</code>:容器和宿主机之间的文件复制</p><p>下载文件 <code>docker cp </code><code>容器ID:/home/test C://Users//Administrator//Desktop</code></p><p>上传文件 <code>docker cp </code><code>C://Users//Administrator//Desktop//test2 容器ID:/home</code></p><p><code>docker commit</code>:从容器创建一个新的镜像</p><p><code>ocker commit containerId aaa:tag</code></p><p><code>-m</code> : 提交的描述信息</p><p><code>-a</code>：指定镜像作者</p><h2 id="命令" tabindex="-1"><a class="header-anchor" href="#命令" aria-hidden="true">#</a> 命令</h2><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># 查看容器资源占用</span>
<span class="token function">docker</span> stats --no-stream  
<span class="token comment"># 重启指定容器</span>
<span class="token function">docker</span> restart 容器id
</code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><!--]--></div><footer class="page-meta"><!----><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: Xast@123456">sunyuxuan</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: Xast@123456">孤城致幻</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/LonelyCityHallucination/knowledge/webstrom/" class="" aria-label="webstrom"><!--[--><!--]--> webstrom <!--[--><!--]--></a></span><span class="next"><a href="/LonelyCityHallucination/knowledge/Deepin/" class="" aria-label="Deepin"><!--[--><!--]--> Deepin <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/LonelyCityHallucination/assets/app.2c8e1465.js" defer></script>
  </body>
</html>
