import{_ as s,o as n,c as a,N as e}from"./chunks/framework.60272d8a.js";const y=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/vue/EventBuså…¨å±€äº‹ä»¶æ€»çº¿.md","lastUpdated":1706686109000}'),l={name:"guide/vue/EventBuså…¨å±€äº‹ä»¶æ€»çº¿.md"},p=e(`<h2 id="ä¸€ã€ä»€ä¹ˆæ˜¯eventbus" tabindex="-1">ä¸€ã€ä»€ä¹ˆæ˜¯EventBus <a class="header-anchor" href="#ä¸€ã€ä»€ä¹ˆæ˜¯eventbus" aria-label="Permalink to &quot;ä¸€ã€ä»€ä¹ˆæ˜¯EventBus&quot;">â€‹</a></h2><ul><li>EventBusæ˜¯ä¸€ä¸ªå¼€æºåº“ï¼Œåˆ©ç”¨<strong>å‘å¸ƒ/è®¢é˜…è€…æ¨¡å¼</strong>å¯¹é¡¹ç›®è¿›è¡Œè§£è€¦</li><li>åˆ©ç”¨å¾ˆå°‘çš„ä»£ç æ¥å®ç°å¤šç»„ä»¶é—´é€šä¿¡</li><li>åœ¨Vueä¸­å¯ä»¥ä½¿ç”¨å®ƒæ¥ä½œä¸ºæ²Ÿé€šæ¡¥æ¢çš„æ¦‚å¿µï¼Œå°±åƒæ‰€æœ‰ç»„ä»¶å…±ç”¨çš„ç›¸åŒçš„äº‹ä»¶ä¸­å¿ƒ</li><li>å¦‚å›¾æ‰€ç¤ºï¼Œå¯ä»¥å‘è¯¥ä¸­å¿ƒæ³¨å†Œå‘é€äº‹ä»¶æˆ–è€…æ¥æ”¶äº‹ä»¶ï¼Œè¿™ä¹Ÿå°±è¯´æ˜äº†<strong>æ‰€æœ‰ç»„ä»¶å¯ä»¥ä¸Šä¸‹å¹³è¡Œåœ°é€šçŸ¥å…¶ä»–ç»„ä»¶</strong> <img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3abede3bba4240b0b7730f39f6cd0198~tplv-k3u1fbpfcp-zoom-in-crop-mark:3024:0:0:0.awebp?" alt="image.png"></li></ul><h2 id="äºŒã€-åœ¨vue2-ä¸­å¦‚ä½•ä½¿ç”¨eventbus" tabindex="-1">äºŒã€ åœ¨vue2 ä¸­å¦‚ä½•ä½¿ç”¨eventBus <a class="header-anchor" href="#äºŒã€-åœ¨vue2-ä¸­å¦‚ä½•ä½¿ç”¨eventbus" aria-label="Permalink to &quot;äºŒã€ åœ¨vue2 ä¸­å¦‚ä½•ä½¿ç”¨eventBus&quot;">â€‹</a></h2><h4 id="ğŸŒ¼-åˆ›å»ºäº‹ä»¶æ€»çº¿" tabindex="-1">ğŸŒ¼ åˆ›å»ºäº‹ä»¶æ€»çº¿ <a class="header-anchor" href="#ğŸŒ¼-åˆ›å»ºäº‹ä»¶æ€»çº¿" aria-label="Permalink to &quot;ğŸŒ¼ åˆ›å»ºäº‹ä»¶æ€»çº¿&quot;">â€‹</a></h4><ul><li>ç¬¬ä¸€ç§æ–¹æ³•æ˜¯å¯ä»¥ç›´æ¥åœ¨<code>main.js</code>åˆå§‹åŒ–,åœ¨vueçš„åŸå‹å¯¹è±¡ä¸Šå®šä¹‰<code>$eventBus</code></li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//main.js</span></span>
<span class="line"><span style="color:#FFCB6B;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">prototype</span><span style="color:#89DDFF;">.</span><span style="color:#BABED8;">$eventBus </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#BABED8;">()</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>ç¬¬äºŒç§å¯ä»¥æ–°å»ºä¸€ä¸ª.jsæ–‡ä»¶ï¼Œåœ¨å…¶ä¸­å¼•å…¥Vueå¹¶å¯¼å‡ºå®ƒçš„ä¸€ä¸ªå®ä¾‹</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//event-bus.js</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> Vue </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">vue</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">export</span><span style="color:#BABED8;"> </span><span style="color:#C792EA;">const</span><span style="color:#BABED8;"> EventBus </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">new</span><span style="color:#BABED8;"> </span><span style="color:#82AAFF;">Vue</span><span style="color:#BABED8;">()</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>å®è´¨ä¸Šå®ƒç®—ä¸€ä¸ªä¸å…·å¤‡DOMçš„ç»„ä»¶ï¼Œæˆ‘ä»¬éœ€è¦çš„ä»…ä»…æ˜¯å®ƒçš„å®ä¾‹æ–¹æ³•</p><h4 id="ğŸŒ¼-å¼•å…¥event-bus-js" tabindex="-1">ğŸŒ¼ å¼•å…¥event-bus.js <a class="header-anchor" href="#ğŸŒ¼-å¼•å…¥event-bus-js" aria-label="Permalink to &quot;ğŸŒ¼ å¼•å…¥event-bus.js&quot;">â€‹</a></h4><ul><li>ä»…ä½¿ç”¨ä¸Šè¿°ç¬¬äºŒç§æ–¹æ³•æ‰éœ€è¦è¿™ä¸€æ­¥</li><li>æ¯ä¸€ä¸ªä½¿ç”¨åˆ°eventBusçš„ç»„ä»¶éƒ½éœ€è¦å¼•å…¥event-bus.js</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#BABED8;"> EventBus form </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">./eventBus.js</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="ğŸŒ¼è§¦å‘äº‹ä»¶" tabindex="-1">ğŸŒ¼è§¦å‘äº‹ä»¶ <a class="header-anchor" href="#ğŸŒ¼è§¦å‘äº‹ä»¶" aria-label="Permalink to &quot;ğŸŒ¼è§¦å‘äº‹ä»¶&quot;">â€‹</a></h4><ul><li>å‘å¸ƒè€…è§’è‰²</li><li>ä½¿ç”¨æ–¹æ³•</li></ul><div class="language-javascript line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">javascript</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;">//å¯¹äºæ–¹å¼ä¸€</span></span>
<span class="line"><span style="color:#89DDFF;">this.</span><span style="color:#BABED8;">$eventBus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">$emit</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eventName</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">params</span><span style="color:#89DDFF;">....</span><span style="color:#BABED8;">)</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//å¯¹äºæ–¹å¼äºŒ</span></span>
<span class="line"><span style="color:#BABED8;">EventBus</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">$emit</span><span style="color:#BABED8;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">eventName</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;">params</span><span style="color:#89DDFF;">....</span><span style="color:#BABED8;">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li>ä½¿ç”¨å®ä¾‹ --åœ¨é¡µé¢Aå‘å¸ƒäº‹ä»¶</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&lt;template&gt;</span></span>
<span class="line"><span style="color:#babed8;">    &lt;button @click=&quot;sendMsg()&quot;&gt;-&lt;/button&gt;</span></span>
<span class="line"><span style="color:#babed8;">&lt;/template&gt;</span></span>
<span class="line"><span style="color:#babed8;"> </span></span>
<span class="line"><span style="color:#babed8;">&lt;script&gt; </span></span>
<span class="line"><span style="color:#babed8;">import EventBus from &#39;./eventBus.js&#39;</span></span>
<span class="line"><span style="color:#babed8;">export default {</span></span>
<span class="line"><span style="color:#babed8;">  methods: {</span></span>
<span class="line"><span style="color:#babed8;">  //å‘é€äº‹ä»¶</span></span>
<span class="line"><span style="color:#babed8;">    sendMsg() {</span></span>
<span class="line"><span style="color:#babed8;">      EventBus.$emit(&quot;aPostMsg&quot;, &#39;é¡µé¢Aå‘å‡ºçš„æ¶ˆæ¯&#39;);</span></span>
<span class="line"><span style="color:#babed8;">      //æˆ–è€…</span></span>
<span class="line"><span style="color:#babed8;">      this.$eventBus.$emit(&#39;aPostMsg&#39;,&#39;é¡µé¢Aå‘å‡ºçš„æ¶ˆæ¯&#39;);</span></span>
<span class="line"><span style="color:#babed8;">    }</span></span>
<span class="line"><span style="color:#babed8;">  }</span></span>
<span class="line"><span style="color:#babed8;">}; </span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h4 id="ğŸŒ¼-ç›‘å¬äº‹ä»¶" tabindex="-1">ğŸŒ¼ ç›‘å¬äº‹ä»¶ <a class="header-anchor" href="#ğŸŒ¼-ç›‘å¬äº‹ä»¶" aria-label="Permalink to &quot;ğŸŒ¼ ç›‘å¬äº‹ä»¶&quot;">â€‹</a></h4><ul><li>è®¢é˜…è€…è§’è‰²</li><li>ä½¿ç”¨æ–¹æ³•</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">//å¯¹äºæ–¹å¼ä¸€</span></span>
<span class="line"><span style="color:#babed8;">this.$eventBus.$on(&#39;evnetName&#39;,(params...) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">    //do something....</span></span>
<span class="line"><span style="color:#babed8;">})</span></span>
<span class="line"><span style="color:#babed8;">//å¯¹äºæ–¹å¼äºŒ</span></span>
<span class="line"><span style="color:#babed8;">EventBus.$on(&#39;eventName&#39;, (params...) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">    //do something....</span></span>
<span class="line"><span style="color:#babed8;">})</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><ul><li>ä½¿ç”¨å®ä¾‹ --åœ¨é¡µé¢Bè®¢é˜…äº‹ä»¶</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">&lt;script&gt; </span></span>
<span class="line"><span style="color:#babed8;">import EventBus from &#39;./eventBus.js&#39;</span></span>
<span class="line"><span style="color:#babed8;">export default {</span></span>
<span class="line"><span style="color:#babed8;">  data(){</span></span>
<span class="line"><span style="color:#babed8;">    return {}</span></span>
<span class="line"><span style="color:#babed8;">  },</span></span>
<span class="line"><span style="color:#babed8;">  mounted() {</span></span>
<span class="line"><span style="color:#babed8;">    EventBus.$on(&quot;aPostMsg&quot;, (msg) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">      console.log(msg) //é¡µé¢Aå‘å‡ºçš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#babed8;">    });</span></span>
<span class="line"><span style="color:#babed8;">    //æˆ–è€…</span></span>
<span class="line"><span style="color:#babed8;">    this.$eventBus.$on(&quot;aPostMsg&quot;, (msg) =&gt; {</span></span>
<span class="line"><span style="color:#babed8;">      console.log(msg) //é¡µé¢Aå‘å‡ºçš„æ¶ˆæ¯</span></span>
<span class="line"><span style="color:#babed8;">    });</span></span>
<span class="line"><span style="color:#babed8;">  }</span></span>
<span class="line"><span style="color:#babed8;">};</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><blockquote><p>å¦‚æœåªæ˜¯è¿™æ ·çš„ï¼Œç›‘å¬äº‹ä»¶ä¼šä¸€ç›´å­˜åœ¨ï¼Œåå¤è¿›å…¥åˆ°æ¥æ”¶ç»„ä»¶å†…æ“ä½œè·å–æ•°æ®æˆ‘ä»¬åªæœŸå¾…å‘é€ä¸€æ¬¡ï¼Œä½†æ˜¯ä¼šå‘ç”Ÿå¤šæ¬¡</p></blockquote><h4 id="ğŸŒ¼-ç§»é™¤äº‹ä»¶ç›‘å¬" tabindex="-1">ğŸŒ¼ ç§»é™¤äº‹ä»¶ç›‘å¬ <a class="header-anchor" href="#ğŸŒ¼-ç§»é™¤äº‹ä»¶ç›‘å¬" aria-label="Permalink to &quot;ğŸŒ¼ ç§»é™¤äº‹ä»¶ç›‘å¬&quot;">â€‹</a></h4><ul><li><p>åŸå› ï¼š</p><ul><li>é¿å…åœ¨ç›‘å¬çš„æ—¶å€™ï¼Œå¦‚ä¸Šè¿°æ‰€è¯´çš„ï¼Œäº‹ä»¶è¢«åå¤ç›‘å¬</li><li>å› ä¸ºæ˜¯çƒ­æ›´æ–°ï¼Œäº‹ä»¶å¯èƒ½ä¼šè¢«å¤šæ¬¡ç»‘å®šç›‘å¬</li><li>æ²¡æœ‰åŠæ—¶ç§»é™¤eventBusä¹Ÿå¯èƒ½ä¼šå¯¼è‡´å†…å®¹æ³„æ¼</li></ul></li><li><p>é‚£ä¹ˆå¦‚ä½•ç§»é™¤äº‹ä»¶ç›‘å¬å‘¢</p><ul><li>ç§»é™¤å•ä¸ªäº‹ä»¶</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">//å¯¹äºæ–¹å¼ä¸€</span></span>
<span class="line"><span style="color:#babed8;">EventBus.$off(&#39;aPostMsg&#39;)</span></span>
<span class="line"><span style="color:#babed8;">//å¯¹äºæ–¹å¼äºŒ</span></span>
<span class="line"><span style="color:#babed8;">this.$eventBus.$off(&#39;aPostMsg&#39;)</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>ç§»é™¤æ‰€æœ‰äº‹ä»¶</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">//å¯¹äºæ–¹å¼ä¸€</span></span>
<span class="line"><span style="color:#babed8;">EventBus.$off(&#39;aPostMsg&#39;)</span></span>
<span class="line"><span style="color:#babed8;">//å¯¹äºæ–¹å¼äºŒ</span></span>
<span class="line"><span style="color:#babed8;">this.$eventBus.$off(&#39;aPostMsg&#39;)</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li><li><p>ä½¿ç”¨å®ä¾‹</p><ul><li>åœ¨beforeDestroyed(){}ä¸­ç›‘å¬ç§»é™¤äº‹ä»¶</li></ul><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">beforeDestroyed(){</span></span>
<span class="line"><span style="color:#babed8;">  EventBus.$off(&#39;aPostMsg&#39;)</span></span>
<span class="line"><span style="color:#babed8;">  //æˆ–è€…</span></span>
<span class="line"><span style="color:#babed8;">   this.$eventBus.$off(&#39;aPostMsg&#39;)</span></span>
<span class="line"><span style="color:#babed8;">}</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><h2 id="ä¸‰ã€vue3-ä¸­çš„-eventbus" tabindex="-1">ä¸‰ã€vue3 ä¸­çš„ eventBus <a class="header-anchor" href="#ä¸‰ã€vue3-ä¸­çš„-eventbus" aria-label="Permalink to &quot;ä¸‰ã€vue3 ä¸­çš„ eventBus&quot;">â€‹</a></h2><h4 id="ğŸŒ·-vue3çš„å˜åŒ–" tabindex="-1">ğŸŒ· Vue3çš„å˜åŒ– <a class="header-anchor" href="#ğŸŒ·-vue3çš„å˜åŒ–" aria-label="Permalink to &quot;ğŸŒ· Vue3çš„å˜åŒ–&quot;">â€‹</a></h4><ul><li>åœ¨ Vue3.0+ çš„ç‰ˆæœ¬ä¸­ï¼ŒVue ç§»é™¤äº†<code>$on</code>ã€<code>$off</code>å’Œ<code>$once</code>æ–¹æ³•ï¼›å¹¶ä¸”æ²¡æœ‰æä¾›å…¼å®¹çš„åŠŸèƒ½</li><li>åœ¨vue3ä¸­æ¨èæˆ‘ä»¬ä½¿ç”¨<code>mitt</code>äº‹ä»¶æ€»çº¿ä¼ é€’æ•°æ®ï¼Œå…¶å®mittçš„ä½¿ç”¨æ–¹å¼å’ŒvueåŸæœ¬çš„è‡ªå®šä¹‰äº‹ä»¶ä½¿ç”¨æ–¹å¼ç›¸åŒ -<a href="https://link.juejin.cn/?target=https%3A%2F%2Fgithub.com%2Fvuejs%2Frfcs%2Fblob%2Fmaster%2Factive-rfcs%2F0020-events-api-change.md" title="https://github.com/vuejs/rfcs/blob/master/active-rfcs/0020-events-api-change.md" target="_blank" rel="noreferrer">è¯¦ç»†å¯æŸ¥çœ‹æ–‡æ¡£</a></li></ul><h4 id="ğŸŒ·-mittçš„ä½¿ç”¨" tabindex="-1">ğŸŒ· mittçš„ä½¿ç”¨ <a class="header-anchor" href="#ğŸŒ·-mittçš„ä½¿ç”¨" aria-label="Permalink to &quot;ğŸŒ· mittçš„ä½¿ç”¨&quot;">â€‹</a></h4><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">- åœ¨æ ¹ç›®å½•ç»ˆç«¯æ‰§è¡Œ</span></span>
<span class="line"><span style="color:#babed8;">\`\`\`js</span></span>
<span class="line"><span style="color:#babed8;">npm install --save mitt</span></span>
<span class="line"><span style="color:#babed8;">\`\`\`</span></span>
<span class="line"><span style="color:#babed8;">- å°†æ–¹æ³•å¯¼å‡ºä½¿ç”¨</span></span>
<span class="line"><span style="color:#babed8;">\`\`\`js </span></span>
<span class="line"><span style="color:#babed8;">// eventBus.js</span></span>
<span class="line"><span style="color:#babed8;">import emitter from &#39;tiny-emitter/instance&#39;</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;">export default {</span></span>
<span class="line"><span style="color:#babed8;">  $on: (...args) =&gt; emitter.on(...args),</span></span>
<span class="line"><span style="color:#babed8;">  $once: (...args) =&gt; emitter.once(...args),</span></span>
<span class="line"><span style="color:#babed8;">  $off: (...args) =&gt; emitter.off(...args),</span></span>
<span class="line"><span style="color:#babed8;">  $emit: (...args) =&gt; emitter.emit(...args),</span></span>
<span class="line"><span style="color:#babed8;">}</span></span>
<span class="line"><span style="color:#babed8;">\`\`\`</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="å››ã€-æ‰‹å†™-eventbus" tabindex="-1">å››ã€ æ‰‹å†™ eventBus <a class="header-anchor" href="#å››ã€-æ‰‹å†™-eventbus" aria-label="Permalink to &quot;å››ã€ æ‰‹å†™ eventBus&quot;">â€‹</a></h2><h4 id="ğŸŒ»-å®ç°æ€è·¯" tabindex="-1">ğŸŒ» å®ç°æ€è·¯ï¼š <a class="header-anchor" href="#ğŸŒ»-å®ç°æ€è·¯" aria-label="Permalink to &quot;ğŸŒ» å®ç°æ€è·¯ï¼š&quot;">â€‹</a></h4><ul><li>å£°æ˜äº†ä¸€ä¸ª<code>EventBus</code>ç±»ï¼Œç”¨æ¥å¤„ç†å‘å¸ƒè®¢é˜…ï¼Œç”¨<code>events</code>å¯¹è±¡å­˜å‚¨ç›‘å¬çš„æ—¶é—´ï¼Œ ç”¨æ•°ç»„å­˜å‚¨ç›‘å¬äº‹ä»¶çš„å›è°ƒå‡½æ•°</li><li><strong>è®¢é˜…</strong> äº†äº‹ä»¶thing1ï¼Œthing2.... å…ˆåˆ¤æ–­è¯¥äº‹ä»¶æ˜¯å¦å­˜å‚¨è¿‡ï¼Œå¦‚æœæ²¡æœ‰å­˜å‚¨è¿‡å°±èµ‹å€¼ä¸ºç©ºæ•°ç»„ï¼Œå­˜å‚¨è¿‡å°±å¾€æ•°ç»„é‡Œé¢<code>push</code>å›è°ƒå‡½æ•°</li><li><strong>è§¦å‘</strong>äº†äº‹ä»¶ï¼Œåˆ™ä»<code>events</code>å–å‡ºè¯¥äº‹ä»¶çš„å›è°ƒå‡½æ•°æ•°ç»„ï¼Œåˆ©ç”¨for..of..å¯¹å…¶è¿›è¡Œéå†è°ƒç”¨</li><li><strong>ç§»é™¤</strong>äº‹ä»¶ ,å¦‚æœeventsæœ‰è¯¥äº‹ä»¶çš„è¯åˆ™å¯¹å…¶è¿›è¡Œdelete</li></ul><h4 id="ğŸŒ»-å®ç°ä»£ç " tabindex="-1">ğŸŒ» å®ç°ä»£ç  <a class="header-anchor" href="#ğŸŒ»-å®ç°ä»£ç " aria-label="Permalink to &quot;ğŸŒ» å®ç°ä»£ç &quot;">â€‹</a></h4><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#babed8;">  class EventBus {</span></span>
<span class="line"><span style="color:#babed8;">    constructor() {</span></span>
<span class="line"><span style="color:#babed8;">      this.events = {}; // ç”¨äºå­˜å‚¨æ‰€æœ‰è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#babed8;">    }</span></span>
<span class="line"><span style="color:#babed8;">    // è®¢é˜…äº‹ä»¶</span></span>
<span class="line"><span style="color:#babed8;">    $on(name, callbcak) {</span></span>
<span class="line"><span style="color:#babed8;">      // åˆ¤æ–­æ˜¯å¦å­˜å‚¨è¿‡</span></span>
<span class="line"><span style="color:#babed8;">      if(!this.events[name]) {</span></span>
<span class="line"><span style="color:#babed8;">        this.events[name] = [];</span></span>
<span class="line"><span style="color:#babed8;">      }</span></span>
<span class="line"><span style="color:#babed8;">      this.events[name].push(callbcak); // å¾€äº‹ä»¶æ•°ç»„é‡Œé¢push</span></span>
<span class="line"><span style="color:#babed8;">    }</span></span>
<span class="line"><span style="color:#babed8;">    // å‘å¸ƒäº‹ä»¶</span></span>
<span class="line"><span style="color:#babed8;">    $emit(nameï¼Œ ...args) {</span></span>
<span class="line"><span style="color:#babed8;">      // è·å–å­˜å‚¨çš„äº‹ä»¶å›è°ƒå‡½æ•°æ•°ç»„</span></span>
<span class="line"><span style="color:#babed8;">      const eventList = this.events[name];</span></span>
<span class="line"><span style="color:#babed8;">      // æ‰§è¡Œæ‰€æœ‰å›è°ƒå‡½æ•°</span></span>
<span class="line"><span style="color:#babed8;">      for (const callbcak of eventList) {</span></span>
<span class="line"><span style="color:#babed8;">        callbcak(...args);</span></span>
<span class="line"><span style="color:#babed8;">      }</span></span>
<span class="line"><span style="color:#babed8;">    }</span></span>
<span class="line"><span style="color:#babed8;">    // ç§»é™¤äº‹ä»¶</span></span>
<span class="line"><span style="color:#babed8;">    $off(name) {</span></span>
<span class="line"><span style="color:#babed8;">    if(this.evetns[name]) {</span></span>
<span class="line"><span style="color:#babed8;">        delete this.events[name]</span></span>
<span class="line"><span style="color:#babed8;">    }</span></span>
<span class="line"><span style="color:#babed8;"></span></span>
<span class="line"><span style="color:#babed8;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div>`,35),r=[p];function t(c,o,i,b,u,d){return n(),a("div",null,r)}const v=s(l,[["render",t]]);export{y as __pageData,v as default};
