import{_ as s,o as n,c as a,N as l}from"./chunks/framework.60272d8a.js";const E=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"knowledge/GitHub/Actions.md","lastUpdated":1706686109000}'),p={name:"knowledge/GitHub/Actions.md"},e=l(`<h2 id="基本概念" tabindex="-1">基本概念 <a class="header-anchor" href="#基本概念" aria-label="Permalink to &quot;基本概念&quot;">​</a></h2><p>GitHub Actions 有一些自己的术语。</p><ol><li><p>workflow （工作流程）：持续集成一次运行的过程，就是一个 workflow。</p></li><li><p>job （任务）：一个 workflow 由一个或多个 jobs 构成，含义是一次持续集成的运行，可以完成多个任务。</p></li><li><p>step（步骤）：每个 job 由多个 step 构成，一步步完成。</p></li><li><p>action （动作）：每个 step 可以依次执行一个或多个命令（action）。</p></li><li><p>具体可以前往 阮一峰的这篇 <a href="http://www.ruanyifeng.com/blog/2019/09/getting-started-with-github-actions.html" target="_blank" rel="noreferrer">GitHub Actions 入门教程</a> 了解一二</p></li></ol><h2 id="编写-workflow-文件" tabindex="-1">编写 workflow 文件 <a class="header-anchor" href="#编写-workflow-文件" aria-label="Permalink to &quot;编写 workflow 文件&quot;">​</a></h2><ol><li>点击仓库的 Actions 按钮</li><li>点击 Set up a workflow yourself 按钮</li><li>复制如下内容</li><li>name: GitHub Actions Build and Deploy</li></ol><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 触发条件: push 到 master 分支后</span></span>
<span class="line"><span style="color:#FFCB6B;">on:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#FFCB6B;">push:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">branches:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">master</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 设置上海时区</span></span>
<span class="line"><span style="color:#FFCB6B;">env:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#FFCB6B;">TZ:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Asia/Shanghai</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 任务</span></span>
<span class="line"><span style="color:#82AAFF;">jobs</span><span style="color:#BABED8;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#FFCB6B;">build-and-deploy:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#676E95;font-style:italic;"># 服务器环境：最新版 ubuntu</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">runs-on:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#FFCB6B;">steps:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#676E95;font-style:italic;"># 拉取代码</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">name:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Checkout</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">uses:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">actions/checkout@v2</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">with:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#FFCB6B;">persist-credentials:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">false</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#676E95;font-style:italic;"># 打包静态文件  </span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">name:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Build</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#676E95;font-style:italic;">#你也可以使用yarn</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">run:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">install</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#BABED8;"> </span><span style="color:#FFCB6B;">npm</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">run</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#676E95;font-style:italic;"># 部署</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#FFCB6B;">-</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">name:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Deploy</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#676E95;font-style:italic;"># 引用别人写好的步骤，uses 后面是库名</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">uses:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">jenkey2011/vuepress-deploy@master</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#FFCB6B;">env:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># GitHub 密钥</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#FFCB6B;">ACCESS_TOKEN:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">\${</span><span style="color:#BABED8;">{ secrets.ACCESS_TOKEN </span><span style="color:#89DDFF;">}</span><span style="color:#C3E88D;">}</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># 静态文件所在目录</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#FFCB6B;">FOLDER:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">dist</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># 你所要推送的仓库</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#FFCB6B;">TARGET_REPO:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">taozuidesongshu/LonelyCityHallucination</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># 推送的分支</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#FFCB6B;">TARGET_BRANCH:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">gh-pages</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#676E95;font-style:italic;"># 要推送的，打包后的文件目录</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#FFCB6B;">BUILD_DIR:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docs/.vuepress/dist</span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><h2 id="使用github-action" tabindex="-1">使用Github Action <a class="header-anchor" href="#使用github-action" aria-label="Permalink to &quot;使用Github Action&quot;">​</a></h2><p><a href="https://zhuanlan.zhihu.com/p/107545396" target="_blank" rel="noreferrer">使用Github Action 部署项目到云服务器</a></p><p><a href="https://frostming.com/2020/04-26/github-actions-deploy/" target="_blank" rel="noreferrer">使用 GitHub Actions 实现博客自动化部署</a></p><p><a href="https://juejin.cn/post/6887751398499287054#comment" target="_blank" rel="noreferrer">前端项目自动化部署</a></p><p><a href="https://github.com/jenkey2011/vuepress-deploy/blob/master/README.zh-CN.md" target="_blank" rel="noreferrer">自动构建、部署vuepress应用到Github Pages，自由设置仓库、分支</a></p><h2 id="如何写一个-github-action-给别人用" tabindex="-1">如何写一个 Github Action 给别人用 <a class="header-anchor" href="#如何写一个-github-action-给别人用" aria-label="Permalink to &quot;如何写一个 Github Action 给别人用&quot;">​</a></h2><p><a href="https://zhuanlan.zhihu.com/p/365786749" target="_blank" rel="noreferrer">教程</a></p><p><a href="https://www.bbsmax.com/A/gGdXPpPvd4/" target="_blank" rel="noreferrer">教程1</a></p><p><a href="https://blog.csdn.net/qq_33020601/article/details/124002414" target="_blank" rel="noreferrer">一起编写个多用途 Github Action 吧</a></p>`,15),o=[e];function r(t,c,i,B,y,b){return n(),a("div",null,o)}const D=s(p,[["render",r]]);export{E as __pageData,D as default};
